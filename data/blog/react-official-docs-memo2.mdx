---
title: Memo of React Official Documents (2)
date: '2023-01-06'
tags: ['FE', 'Javascript', 'React', 'State']
draft: false
---

# [React] Official Docs memo 2

ë¬´ì—‡ì„ stateë¡œ ê´€ë¦¬í•  ê²ƒì¸ì§€ ë“±

ì»´í¬ë„ŒíŠ¸ ê°œë°œ ì „ ê³ ë¯¼

### 1. Mock-Up (JSON ë“±)ìœ¼ë¡œ ì‹œì‘

### 2. í™”ë©´ì„ UI ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±í•  ë•Œ

* ê°„ë‹¨í•œ ê²½ìš°
: í•˜ì¸µë¶€ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒì¸µë¶€ì— ìˆ ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ìˆœì„œë¡œ ê°œë°œ

* í”„ë¡œì íŠ¸ê°€ í° ê²½ìš°
: ìƒí–¥ì‹ìœ¼ë¡œ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ìª½ì´ ë¹ ë¦„

### 3. Props & State íŒë‹¨

1. ë¶€ëª¨ë¡œë¶€í„° propsë¥¼ í†µí•´ ì „ë‹¬í•˜ëŠ” ê°’ => props

1. ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•ŠëŠ” ê°’=> props

1. stateë‚˜ propsë¥¼ ê°€ì§€ê³  ê³„ì‚° ê°€ëŠ¥í•œ ê°’ => props

* ì œí’ˆì˜ ì›ë³¸ ëª©ë¡ì€ propsë¥¼ í†µí•´ ì „ë‹¬ë˜ë¯€ë¡œ stateê°€ ì•„ë‹˜

* ê²€ìƒ‰ì–´ì™€ ì²´í¬ë°•ìŠ¤ëŠ” state, ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€í•˜ê¸°ë„ í•˜ë©´ì„œ ë‹¤ë¥¸ ê²ƒë“¤ë¡œë¶€í„° ê³„ì‚°ë  ìˆ˜ ì—†ë‹¤.

* **í•„í„°ë§ ëœ ëª©ë¡ => stateê°€ ì•„ë‹˜. ì œí’ˆì˜ ì›ë³¸ ëª©ë¡ê³¼ ê²€ìƒ‰ì–´, ì²´í¬ë°•ìŠ¤ì˜ ê°’ì„ ì¡°í•©í•´ì„œ ê³„ì‚°í•´ë‚¼ ìˆ˜ ìˆê¸° ë•Œë¬¸**

### 4. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê°€ì§€ëŠ” ê°ê°ì˜ stateì— ëŒ€í•´

* stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë Œë”ë§í•˜ëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ì°¾ê¸°

* ê³µí†µ ì†Œìœ  ì»´í¬ë„ŒíŠ¸ (common owner component)ë¥¼ ì°¾ìœ¼ì„¸ìš”. (ê³„ì¸µ êµ¬ì¡° ë‚´ì—ì„œ íŠ¹ì • stateê°€ ìˆì–´ì•¼ í•˜ëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ìƒìœ„ì— ìˆëŠ” í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸)

* **ê³µí†µ í˜¹ì€ ë” ìƒìœ„ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ê°€ stateë¥¼ ê°€ì§„ë‹¤ **(ë§Œì•½, stateë¥¼ ì†Œìœ  í•  ì ì ˆí•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ì§€ ëª»í•˜ì˜€ë‹¤ë©´, stateë¥¼ ì†Œìœ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì„œ ê³µí†µ ì†Œìœ  ì»´í¬ë„ŒíŠ¸ì˜ ìƒìœ„ ê³„ì¸µì— ì¶”ê°€)

### 5. Result

stateë¡œ ê´€ë¦¬í•  ë¶€ë¶„: ê²€ìƒ‰ì–´ì™€ ì²´í¬ë°•ìŠ¤ ìƒíƒœ í‘œì‹œ

ProductTable : stateì— ì˜ì¡´í•œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ì˜ í•„í„°ë§
SearchBar : ê²€ìƒ‰ì–´ì™€ ì²´í¬ë°•ìŠ¤ì˜ ìƒíƒœë¥¼ í‘œì‹œ
FilterableProductTable : ìœ„ ë‘ ì»´í¬ë„ŒíŠ¸ë¥¼ ì†Œìœ í•œ ê³µí†µ ì†Œìœ  ì»´í¬ë„ŒíŠ¸

* ì˜ë¯¸ìƒìœ¼ë¡œë„ FilterableProductTableì´ ê²€ìƒ‰ì–´ì™€ ì²´í¬ë°•ìŠ¤ì˜ ì²´í¬ ì—¬ë¶€ë¥¼ ê°€ì§€ëŠ” ê²ƒì´ íƒ€ë‹¹

{/* this.state = {filterText: , inStockOnly: false} ë¥¼ FilterableProductTableì˜ constructorì— ì¶”ê°€í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ˆê¸° ìƒíƒœë¥¼ ë°˜ì˜ í›„, filterTextì™€ inStockOnlyë¥¼ ProductTableì™€ SearchBarì— propìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ì‹. */}

### setState()

* *propsë¥¼í†µí•´ ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì *

    {/* updateCount() {
      this.setState((prevState, props) => {
        return { count: prevState.count + 1 }
      });
    }
    
    // DO NOT USE
    this.setState({
      count: this.state.count + 1
    }); */}

setStateìƒíƒœë¥¼ ì§ì ‘ ì—…ë°ì´íŠ¸í•˜ëŠ” ëŒ€ì‹  ì½œë°± í•¨ìˆ˜ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨. ì½œë°± ë‚´ì—ì„œ prevStateì•¡ì„¸ìŠ¤ ê°€ëŠ¥

### initialState

initialState ì¸ìëŠ” ì´ˆê¸° ë Œë”ë§ ì‹œì— ì‚¬ìš©í•˜ëŠ” stateë¡œ, ê·¸ ì´í›„ì˜ ë Œë”ë§ ì‹œì—ëŠ” ì´ ê°’ì€ ì‚¬ìš© ë˜ì§€ ì•ŠìŒ

**ì´ˆê¸° stateê°€ ê³ ë¹„ìš© ê³„ì‚°ì˜ ê²°ê³¼ë¼ë©´, ì´ˆê¸° ë Œë”ë§ ì‹œì—ë§Œ ì‹¤í–‰ë  í•¨ìˆ˜ë¥¼ ëŒ€ì‹  ì œê³µ**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    {/* const [state, setState] = useState(() => {
      const initialState = someExpensiveComputation(props);
      return initialState;
    }); */}

### Hook

ì™œ Vueë‚˜ Reactê°€
ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë™ì‘ì„ êµ¬ì„± ìš”ì†Œì— â€œë¶€ì°©â€í•˜ëŠ” ë°©ë²•(ì˜ˆ: ì €ì¥ì†Œì— ì—°ê²°)ì—ì„œ
 hooksë¡œ ë„˜ì–´ê°€ëŠ”ê°€

: êµ¬ì„± ìš”ì†Œ ê°„ì— ìƒíƒœ ì €ì¥ ë…¼ë¦¬ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›Œì„œ

* Hooksë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ì¶”ì¶œí•˜ì—¬ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥

* Hooksë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ì»´í¬ë„ŒíŠ¸ê°„ì— ì‰½ê²Œ ê³µìœ  ê°€ëŠ¥

### useEffect Hook

ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ ì´í›„ ë‹¤ì–‘í•œ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ì œì–´

### ì •ë¦¬(clean-up)ë¥¼ ì´ìš©í•˜ëŠ” Effects hook

Effectì— ì •ë¦¬(clean-up)ê°€ í•„ìš”í•œ ê²½ìš°ì—ëŠ” í•¨ìˆ˜ë¥¼ return
{/* 
    useEffect(() => {
        function handleStatusChange(status) {
          setIsOnline(status.isOnline);
        }
        ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);
        return () => {
          ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);
        };
      }); */}

ì •ë¦¬(clean-up)ê°€ í•„ìš”ì—†ëŠ” ê²½ìš°
{/* 
    useEffect(() => {
        document.title = `You clicked ${count} times`;
      }); */}

### Tip) Effect ë‚´ ë¡œì§ì´ ë§ì´ í•„ìš”í•œ ê²½ìš°, êµ¬ë¶„ì„ ìœ„í•´ì„œ useEffectë¥¼ ì—¬ëŸ¬ë²ˆ êµ¬ë¶„í•´ì„œ í˜¸ì¶œ

### Tip) Effectë¥¼ ê±´ë„ˆë›°ì–´ ì„±ëŠ¥ ìµœì í™”

: props.friend.id ê°’ì´ ë³€ê²½ ë  ê²½ìš°ì—ë§Œ ì¬ë Œë”ë§

    {/* useEffect(() => {
      function handleStatusChange(status) {
        setIsOnline(status.isOnline);
      }
    
      ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);
      return () => {
        ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);
      };
    }, [props.friend.id]); // props.friend.idê°€ ë°”ë€” ë•Œë§Œ ì¬êµ¬ë…í•©ë‹ˆë‹¤. */}

* **ì£¼ì˜**

ë°°ì—´ì´ **ì»´í¬ë„ŒíŠ¸ ë²”ìœ„ ë‚´ì—ì„œ ë°”ë€ŒëŠ” ê°’ë“¤ê³¼ effectì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” ê°’ë“¤ì„ ëª¨ë‘ í¬í•¨í•´ì•¼ í•¨**

ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ **í˜„ì¬ ê°’ì´ ì•„ë‹Œ ì´ì „ì˜ ë Œë”ë§ ë•Œì˜ ê°’ì„ ì°¸ê³ **

effectë¥¼ ì‹¤í–‰í•˜ê³  ì´ë¥¼ ì •ë¦¬(clean-up)í•˜ëŠ” ê³¼ì •ì„ (ë§ˆìš´íŠ¸ì™€ ë§ˆìš´íŠ¸ í•´ì œ ì‹œì—)ë”± í•œ ë²ˆì”©ë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´, ë¹ˆ ë°°ì—´([])ì„ ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ ë„˜ê¹€

*ì•„ë˜ ì°¸ê³ 

    {/* function Example({ someProp }) {
      function doSomething() {
        console.log(someProp);  }
    
      useEffect(() => {
        doSomething();
      }, []); // ğŸ”´ ì´ê²ƒì€ ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (`someProp`ì„ ì‚¬ìš©í•˜ëŠ”`doSomething`ì„ í˜¸ì¶œí•©ë‹ˆë‹¤)}

    unction Example({ someProp }) {
      useEffect(() => {
        function doSomething() {
          console.log(someProp);    }
    
        doSomething();
      }, [someProp]); // âœ… OK (ìš°ë¦¬ effectëŠ”`someProp` ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤)}

    useEffect(() => {
      function doSomething() {
        console.log('hello');
      }
    
      doSomething();
    }, []); // âœ… ì´ ì˜ˆì—ì„œëŠ” ì»´í¬ë„ŒíŠ¸ ë²”ìœ„ì˜ *ì–´ë–¤* ê°’ë„ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì¢‹ìŠµë‹ˆë‹¤

    function ProductPage({ productId }) {
      const [product, setProduct] = useState(null);
    
      async function fetchProduct() {
        const response = await fetch('http://myapi/product/' + productId); // productId props ì‚¬ìš©    const json = await response.json();
        setProduct(json);
      }
    
      useEffect(() => {
        fetchProduct();
      }, []); // ğŸ”´ `fetchProduct`ê°€`productId`ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤  // ...
    }

    function ProductPage({ productId }) {
      const [product, setProduct] = useState(null);
    
      useEffect(() => {
        // ì´ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë¥¼ effect ë‚´ë¶€ë¡œ ì´ë™í•˜ë©´ ì‚¬ìš©í•˜ëŠ” ê°’ì„ ëª…í™•í•˜ê²Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.    async function fetchProduct() {      const response = await fetch('http://myapi/product/' + productId);      const json = await response.json();      setProduct(json);    }
        fetchProduct();
      }, [productId]); // âœ… íš¨ê³¼ëŠ” productId ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ìœ íš¨í•©ë‹ˆë‹¤  // ... */}

### Tip) Hook Linter Plugin

Hookì„ ì‚¬ìš©í•  ë•ŒëŠ” ë‘ ê°€ì§€ ê·œì¹™ì„ ì¤€ìˆ˜í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ì´ ê·œì¹™ë“¤ì„ ìë™ìœ¼ë¡œ ê°•ì œí•˜ê¸° ìœ„í•œ [linter í”ŒëŸ¬ê·¸ì¸](https://www.npmjs.com/package/eslint-plugin-react-hooks)ì„ ì œê³µ

### **ë°˜ë³µë¬¸, ì¡°ê±´ë¬¸ í˜¹ì€ ì¤‘ì²©ëœ í•¨ìˆ˜ ë‚´ì—ì„œ Hookì„ í˜¸ì¶œí•˜ì§€ ë§ ê²ƒ**

(ë Œë”ë§ì´ ë  ë•Œë§ˆë‹¤ë™ì¼í•œ ìˆœì„œë¡œ Hookì´ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ë³´ì¥)

    // ğŸ”´ ì¡°ê±´ë¬¸ì— Hookì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì²« ë²ˆì§¸ ê·œì¹™ì„ ê¹¼ìŠµë‹ˆë‹¤
      {/* if (name !== '') {
        useEffect(function persistForm() {
          localStorage.setItem('formData', name);
        });
      } */}

**ì¡°ê±´ë¶€ë¡œ effectë¥¼ ì‹¤í–‰í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´, ì¡°ê±´ë¬¸ì„ Hook *ë‚´ë¶€ì—* ë„£ìœ¼ë©´ ë¨**

    {/* useEffect(function persistForm() {
        // ğŸ‘ ë” ì´ìƒ ì²« ë²ˆì§¸ ê·œì¹™ì„ ì–´ê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤
        if (name !== '') {
          localStorage.setItem('formData', name);
        }
      }); */}

## useReducer

[useState](https://ko.reactjs.org/docs/hooks-reference.html#usestate)ì˜ ëŒ€ì²´ í•¨ìˆ˜ë¡œ ë‹¤ìŒ 2ê°€ì§€ ê²½ìš°ì— ì‚¬ìš©

* ë‹¤ìˆ˜ì˜ í•˜ìœ—ê°’ì„ í¬í•¨í•˜ëŠ” ë³µì¡í•œ ì •ì  ë¡œì§ì„ ë§Œë“œëŠ” ê²½ìš°

* ë‹¤ìŒ stateê°€ ì´ì „ stateì— ì˜ì¡´ì ì¸ ê²½ìš°

ë˜í•œ useReducerëŠ” ìì„¸í•œ ì—…ë°ì´íŠ¸ë¥¼ íŠ¸ë¦¬ê±° í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆê²Œ í•˜ëŠ”ë°, ì´ê²ƒì€** [ì½œë°± ëŒ€ì‹  dispatchë¥¼ ì „ë‹¬](https://ko.reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down) í•  ìˆ˜ ìˆê¸° ë•Œë¬¸**

(** ìì„¸í•œ ì…ˆí”Œ í•„ìš”, reduce()ë¥¼ dispatchì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œ)

ì•„ë˜ëŠ” [useState](https://ko.reactjs.org/docs/hooks-reference.html#usestate) ë¥¼ reducerë¥¼ ì‚¬ìš©í•´ì„œ ë‹¤ì‹œ ì‘ì„±í•œ ì˜ˆì‹œ (ëª¨ë¥´ê² ìŒ)

    {/* const initialState = {count: 0};
    function reducer(state, action) {
      switch (action.type) {
        case 'increment':
          return {count: state.count + 1};
        case 'decrement':
          return {count: state.count - 1};
        default:
          throw new Error();
      }
    }
    function Counter() {
      const [state, dispatch] = useReducer(reducer, initialState);
      return (
        <>
          Count: {state.count}
          <button onClick={() => dispatch({type: 'decrement'})}>-</button>
          <button onClick={() => dispatch({type: 'increment'})}>+</button>
        </>
      );
    } */}

## useMemo

    const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);

[ë©”ëª¨ì´ì œì´ì…˜ëœ](https://ko.wikipedia.org/wiki/%EB%A9%94%EB%AA%A8%EC%9D%B4%EC%A0%9C%EC%9D%B4%EC%85%98) ê°’ì„ ë°˜í™˜ (Vueë¡œ ë”°ì§€ë©´ Computed ê°œë…)

useMemoë¡œ ì „ë‹¬ëœ í•¨ìˆ˜ëŠ” ë Œë”ë§ ì¤‘ì— ì‹¤í–‰ = í†µìƒì ìœ¼ë¡œ ë Œë”ë§ ì¤‘ì—ëŠ” í•˜ë©´ ì•ˆë˜ëŠ” ë¡œì§ë“¤ì„ ë„£ìœ¼ë©´ ì•ˆë¨ (ë Œë”ë§ ê´€ë ¨ ë¡œì§ì€ UseEffect)

## useImperativeHandle

ì‚¬ìš©ì„ ì§€ì–‘
ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì¢€ ë” ë‚˜ì€ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ë¡œ í•„ìš”í•œ ì´ìŠˆë“¤ì„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

## useLayoutEffect

ê°œë…ì€ useEffectì™€ ë™ì¼í•˜ê¸´ í•œë°, ëª¨ë“  DOM ë³€ê²½ í›„ì— ë™ê¸°ì ìœ¼ë¡œ ë°œìƒ, ë”°ë¼ì„œ DOMì—ì„œ ë ˆì´ì•„ì›ƒì„ ì½ê³  ë™ê¸°ì ìœ¼ë¡œ ë¦¬ë Œë”ë§í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©

**ë¨¼ì € useEffectë¥¼ ì‚¬ìš©í•´ ë³´ê³ ** ë¬¸ì œê°€ ìˆë‹¤ë©´ ê·¸ë‹¤ìŒìœ¼ë¡œ useLayoutEffectë¥¼ ì‚¬ìš©í•´ ë³´ê¸°ë¥¼ ê¶Œì¥

+)ì„œë²„ ë Œë”ë§ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ëª¨ë‘ ë‹¤ìš´ë¡œë“œë  ë•Œê¹Œì§€ëŠ” useLayoutEffectì™€ useEffect *ì–´ëŠ ê²ƒë„* ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤
